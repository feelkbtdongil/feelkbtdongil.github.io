import{Q as c}from"./QImg.1efd8844.js";import{j as w,ac as y,r as n,k as Q,U as V,V as I,W as r,a7 as $,$ as o,X as d,n as l,Y as g,bu as p,a4 as q,a0 as T,a6 as f,bO as C,a2 as z,aa as B,S as x}from"./index.07fc3cde.js";import{Q as U}from"./QItemLabel.848dda36.js";import{Q as N}from"./QForm.b2174062.js";import{F as A}from"./FooterBar.34195eeb.js";import{u as F}from"./use-quasar.9559018b.js";import{P as O}from"./SessionStorage.f1db57de.js";import{u as v}from"./vue-i18n.a58ecead.js";import{u as P}from"./setUserInfo.4ca40c19.js";import"./QResizeObserver.9f6a44e1.js";var W="/assets/bg_login.edbea059.png";const j={class:"row"},J={class:"row"},D=o("div",{class:"self-center"},[o("span",{class:"text-h5 text-weight-bold"},"\uB3D9\uC77C\uC11D\uC720\uC8FC\uC2DD\uD68C\uC0AC"),o("br")],-1),L={class:"text-weight-bold self-center q-mt-md",style:{"font-size":"1.92em"}},le={__name:"SignIn",setup(M){const{t:_}=v(),t=F(),h=w(()=>({hidden:t.screen.lt.sm})),u=y();P();const b=n(null),m=n(null),e=n({id:"",password:"",idSave:!1}),S=()=>{e.value.id==="admin"?e.value.password="1234":e.value.password=e.value.id,e.value.id!==!0&&(k(),x.post("/api/auth/login",e.value).then(a=>{if(a.data.data.accessToken&&a.data.state===200){sessionStorage.setItem("accessToken",JSON.stringify(a.data.data.accessToken)),sessionStorage.setItem("refreshToken",JSON.stringify(a.data.data.refreshToken)),u.push({path:"/main"});try{O.set("empCd",e.value.id)}catch{}u.push({path:"/main"})}else t.notify({group:!1,icon:"report_problem",message:_("login_check_message"),color:"negative",position:"bottom-right"});return a.data.data}).catch(a=>{console.log(a),console.log("error1")}))},k=()=>{e.value.idSave?t.localStorage.set("idSave",e.value.id):t.localStorage.set("idSave","")};return Q(()=>{e.value.id=t.localStorage.getItem("idSave"),e.value.idSave=!!e.value.id,e.value.idSave?setTimeout(()=>{m.value.focus()},100):e.value.idSave&&setTimeout(()=>{compCd.value.focus()},100)}),v(),(a,i)=>(V(),I($,null,{default:r(()=>[o("div",j,[o("div",{class:d(["col-sm-6 col-md-8 col-lg-9",h.value])},[l(c,{height:"100vh",src:W})],2),o("div",{class:d(["col-12 col-sm-6 col-md-4 col-lg-3 flex flex-center q-pt-xs-xl q-px-xl",g(t).dark.isActive?"bg-dark":"bg-white"])},[l(B,{flat:"",class:d(g(t).dark.isActive?"bg-dark":"bg-white")},{default:r(()=>[l(p,{class:"q-mb-xl"},{default:r(()=>[l(U,null,{default:r(()=>[o("div",J,[l(q,{square:"",class:"q-mr-sm",size:"md"},{default:r(()=>[l(c,{src:"/src/assets/images/dongil_logo.png"})]),_:1}),D,o("span",L,T(a.$t("project_name")),1)])]),_:1})]),_:1}),l(p,null,{default:r(()=>[l(N,{onSubmit:S,class:"q-gutter-y-lg"},{default:r(()=>[l(f,{ref_key:"userId",ref:b,"label-color":"orange",color:"orange",label:a.$t("login_id"),hint:a.$t("login_id_hint"),modelValue:e.value.id,"onUpdate:modelValue":i[0]||(i[0]=s=>e.value.id=s),"lazy-rules":"",rules:[s=>!!s||a.$t("login_id_hint")]},null,8,["label","hint","modelValue","rules"]),l(f,{ref_key:"passWd",ref:m,"label-color":"orange",color:"orange",type:"password",label:a.$t("login_password"),hint:a.$t("login_password_hint"),modelValue:e.value.id,"onUpdate:modelValue":i[1]||(i[1]=s=>e.value.id=s),"lazy-rules":"",rules:[s=>!!s||a.$t("login_password_hint")]},null,8,["label","hint","modelValue","rules"]),l(C,{modelValue:e.value.idSave,"onUpdate:modelValue":i[2]||(i[2]=s=>e.value.idSave=s),label:a.$t("login_id_save")},null,8,["modelValue","label"]),l(z,{type:"submit",class:"full-width q-mt-xl",unelevated:"",color:"primary",size:"lg",label:a.$t("login_button")},null,8,["label"])]),_:1})]),_:1})]),_:1},8,["class"])],2)]),l(A)]),_:1}))}};export{le as default};
