import{Q as W}from"./QSpace.d904af94.js";import{Q as K}from"./QBar.aa6ab1e6.js";import{Q as h}from"./QSelect.114f76c2.js";import{r as o,j as De,ad as x,p as qe,k as Ee,o as ke,S as p,U as c,V as S,W as n,a7 as Ve,$ as i,n as t,Y as s,a5 as u,ab as We,a6 as Qe,a9 as _,a2 as Q,Z as g,a1 as X,bu as ee,bE as ae,X as te,aa as le,a8 as oe,a0 as T}from"./index.7f77393b.js";import{Q as Ye}from"./QToolbar.963c8e72.js";import{Q as se}from"./QBadge.449d79cc.js";/* empty css                        */import{A as ne}from"./main.esm.3000f5c9.js";import{u as Ae}from"./use-quasar.49a49e75.js";import{l as Y}from"./lodash.de417675.js";import{j as ie,n as ze}from"./json-util.159ec565.js";import{u as Be}from"./setYearInfo.8b7f3a45.js";import"./QField.5fb0fda7.js";import"./QItemSection.f93cdc59.js";import"./QItemLabel.4a9918b4.js";import"./QMenu.0a3c81a9.js";import"./position-engine.150cbc63.js";import"./selection.004dbe93.js";import"./rtl.276c3f1b.js";import"./_commonjsHelpers.b8add541.js";const Oe={class:"row q-col-gutter-md"},Ue={class:"col-12 col-lg-5"},Re=i("span",{class:"text-subtitle2 q-px-sm"},"\uD3C9\uAC00\uC790 \uC120\uD0DD",-1),Ge={class:"row q-col-gutter-md"},Te={class:"col-12 col-lg-7"},He=i("span",{class:"text-subtitle2 q-px-sm"},"\uD3C9\uAC00\uB300\uC0C1\uC790 \uC120\uD0DD",-1),je={class:"row q-pa-xs"},Ie={key:0,class:"col-xs-12 col-sm-3 row"},Je=i("span",{class:"text-subtitle1 text-bold q-mx-sm q-pt-sm"},"\uD3C9\uAC00\uC790 : ",-1),Pe={class:"text-subtitle1 text-bold q-pt-sm"},Fe={class:"col-xs-12 col-sm-9 row"},$e={class:"q-gutter-xs q-pa-xs"},ha={__name:"AuxV2010",setup(Me){const C=Be(),N=Ae(),v=o(!0),b=o("");o("");const H=o(0),j=o(500),I=De(()=>({height:`${j.value}px`})),re=o(null),de=o(null),A=x({rows:[]}),J=x({rows:[]}),P=o(null),F=o(null);o([]);const me=o(!1);qe(()=>{window.removeEventListener("resize",z)}),Ee(()=>{P.value="single",F.value="multiple",q()}),ke(()=>{window.addEventListener("resize",z),z(),we(),Se(),ye(),_e("201")});const pe=a=>{de.value=a.api},ce=x({def:{flex:1,sortable:!0,filter:!0,floatingFilter:!1,editable:!1}}),ue=x({columns:[{headerName:"#",minWidth:60,maxWidth:60,initialPinned:"left",cellStyle:{textAlign:"center"},valueGetter:function(a){return a.node.rowIndex+1}},{headerName:"",field:"",maxWidth:60,minWidth:60,initialPinned:"left",cellStyle:{textAlign:"center"},checkboxSelection:!0},{headerName:"\uC0AC\uBC88",field:"empCd",minWidth:95},{headerName:"\uC131\uBA85",field:"empNm",minWidth:80},{headerName:"\uC9C1\uBD84\uB958",field:"catgNm",minWidth:90},{headerName:"\uC9C1\uAE09",field:"titlNm",minWidth:75},{headerName:"\uC18C\uC18D\uD300",field:"deptNm",minWidth:140}]}),ve=a=>{re.value=a.api,d.value=[],a.api.forEachNode(e=>{e.data.evsEmpCd===r.value[0].empCd&&e.setSelected(!0)}),Y.exports.isEmpty(d.value)&&(w.value=!1,D.value=!1)},fe=x({def:{flex:1,sortable:!0,filter:!0,floatingFilter:!1,editable:!1}}),he=x({columns:[{headerName:"#",filter:!1,minWidth:60,maxWidth:60,pinned:"left",cellStyle:{textAlign:"center"},valueGetter:function(a){return a.node.rowIndex+1}},{sortable:!1,filter:!1,minWidth:60,maxWidth:60,pinned:"left",cellStyle:{textAlign:"center"},checkboxSelection:!0,headerCheckboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0},{headerName:"\uC0AC\uBC88",field:"empCd",minWidth:100,maxWidth:100},{headerName:"\uC131\uBA85",field:"empNm",minWidth:80,maxWidth:80},{headerName:"\uC18C\uC18D\uD300",field:"deptGroupNm",minWidth:150},{headerName:"\uC9C1\uAE09",field:"titlNm",minWidth:90,maxWidth:90},{headerName:"\uC9C1\uBD84\uB958",field:"catgNm",minWidth:100,maxWidth:100},{headerName:"\uD3C9\uAC00\uC790",field:"evsEmpNm",minWidth:100,maxWidth:100}]}),r=o(),d=o(),w=o(!1),D=o(!1),xe=a=>{r.value=a.api.getSelectedRows(),Y.exports.isEmpty(r.value)?(v.value=!0,A.rows=[]):(y(),v.value=!1)},ge=a=>{d.value=a.api.getSelectedRows(),Y.exports.isEmpty(d.value)?(w.value=!1,D.value=!0):(D.value=!1,w.value=!0)},$=()=>{let a=[],e=[];for(let l=0;l<d.value.length;l++){let m={};m.stdYear=r.value[0].stdYear,m.evsEmpCd=r.value[0].empCd,m.evsCd=f.value,m.evtEmpCd=d.value[l].empCd;let Ne='{"mode": "I","data":'+JSON.stringify(m)+"}";a.push(Ne)}Z(ie.jsonFiller(a,e))},Ce=()=>{let a=[],e=[],l={};l.stdYear=r.value[0].stdYear,l.evsEmpCd=r.value[0].empCd,l.evsCd=f.value;let m='{"mode": "D","data":'+JSON.stringify(l)+"}";console.log("json Data : ",m),e.push(m),Z(ie.jsonFiller(a,e))},M=o(0),be=a=>(M.value=a,{minHeight:a?`calc(100vh - ${a}px)`:"100vh"}),z=()=>{j.value=window.innerHeight-M.value-180},q=async()=>{try{const a=await p.post("/api/aux/aux2010_list",{paramSetYear:C.setYear,paramDeptCd:V.value,paramCatgCd:O.value,paramSearchValue:b.value});J.rows=a.data.data}catch(a){console.error("Error fetching users:",a)}},y=async()=>{try{const a=await p.post("/api/aux/aux2010_select",{paramSetYear:C.setYear,paramDeptCd:V.value,paramTitlCd:R.value,paramCatgCd:B.value,paramEvsEmpCd:r.value[0].empCd,paramEvsCd:f.value});A.rows=a.data.data,H.value+=1}catch(a){console.error("Error fetching users:",a)}},Z=a=>{p.post("/api/aux/aux2010_save",a).then(e=>{me.value=!1;let l={};l.rtn=e.data.rtn,l.rtnMsg=e.data.rtnMsg,ze.notifyView(l)}).catch(e=>{console.log("error: ",e)})},E=o([]),k=o([]),V=o(""),L=o(""),B=o(""),O=o("");async function we(a){try{const e=await p.post("/api/mst/dept_option_list",{paramSetYear:C.setYear});E.value=e.data.data,E.value.unshift({deptCd:"",deptNm:"\uC804\uCCB4"})}catch(e){console.error("Error fetching users:",e)}}async function ye(a){try{const e=await p.post("/api/mst/catg_option_list",{paramSetYear:C.setYear});k.value=e.data.data,k.value.unshift({catgCd:"",catgNm:"\uC804\uCCB4"})}catch(e){console.error("Error fetching users:",e)}}const U=o([]),R=o("");async function Se(a){try{const e=await p.post("/api/mst/titl_option_list",{paramSetYear:C.setYear});U.value=e.data.data,U.value.unshift({titlCd:"",titlNm:"\uC804\uCCB4"})}catch(e){console.error("Error fetching users:",e)}}const G=o([]),f=o(null);async function _e(a){try{const e=await p.post("/api/mst/comm_option_list",{paramCommCd1:a});G.value=e.data.data,f.value=G.value[0].commCd}catch(e){console.error("Error fetching users:",e)}}return(a,e)=>(c(),S(Ve,{class:"q-pa-xs-xs q-pa-sm-md","style-fn":be},{default:n(()=>[i("div",Oe,[i("div",Ue,[t(le,{bordered:""},{default:n(()=>[t(K,{class:"q-px-sm"},{default:n(()=>[t(s(u),{name:"list_alt"}),Re,t(W)]),_:1}),t(We,{align:"right",class:"q-pa-none"},{default:n(()=>[t(Ye,{class:"row"},{default:n(()=>[i("div",Ge,[t(h,{dense:"","stack-label":"","options-dense":"",class:"q-px-md q-mr-sm","label-color":"orange",modelValue:L.value,"onUpdate:modelValue":[e[0]||(e[0]=l=>L.value=l),q],options:E.value,"option-value":"deptCd","option-label":"deptNm","option-disable":"inactive","emit-value":"","map-options":"",style:{"min-width":"150px","max-width":"150px"},label:"\uC18C\uC18D\uD300"},null,8,["modelValue","options"]),t(h,{dense:"","stack-label":"","options-dense":"",class:"q-px-md q-mr-sm","label-color":"orange",modelValue:O.value,"onUpdate:modelValue":[e[1]||(e[1]=l=>O.value=l),q],options:k.value,"option-value":"catgCd","option-label":"catgNm","option-disable":"inactive","emit-value":"","map-options":"",style:{"min-width":"150px","max-width":"150px"},label:"\uC9C1\uBD84\uB958"},null,8,["modelValue","options"]),t(Qe,{"stack-label":"","label-color":"orange","bottom-slots":"",modelValue:b.value,"onUpdate:modelValue":e[3]||(e[3]=l=>b.value=l),label:"\uAC80\uC0C9",dense:"",class:"q-pb-none",style:{width:"120px"}},{append:n(()=>[b.value!==""?(c(),S(s(u),{key:0,name:"close",onClick:e[2]||(e[2]=l=>b.value=""),class:"cursor-pointer"})):_("",!0)]),_:1},8,["modelValue"])]),t(W),t(s(Q),{outline:"",color:"positive",dense:"",onClick:q},{default:n(()=>[t(s(u),{name:"search",size:"xs"}),g(" \uC870\uD68C ")]),_:1}),D.value?(c(),S(s(Q),{key:0,outline:"",color:"primary",dense:"",class:"q-ma-xs q-pr-lg",onClick:Ce},{default:n(()=>[t(s(u),{name:"delete",size:"xs",class:"q-mr-sm"}),g(" \uC0AD\uC81C\uD558\uAE30 ")]),_:1})):_("",!0)]),_:1})]),_:1}),t(X,{size:"3px"}),t(ee,{class:"q-pa-xs"},{default:n(()=>[i("div",{style:ae(I.value)},[t(s(ne),{style:{width:"100%",height:"100%"},class:te(s(N).dark.isActive?"ag-theme-alpine-dark":"ag-theme-alpine"),columnDefs:ue.columns,rowData:J.rows,defaultColDef:ce.def,rowSelection:P.value,onSelectionChanged:xe,onGridReady:pe},null,8,["class","columnDefs","rowData","defaultColDef","rowSelection"])],4)]),_:1})]),_:1})]),i("div",Te,[t(le,{bordered:""},{default:n(()=>[t(K,{class:"q-px-sm"},{default:n(()=>[t(s(u),{name:"list_alt"}),He]),_:1}),i("div",je,[s(Y.exports.isEmpty)(r.value)?_("",!0):(c(),oe("div",Ie,[Je,i("span",Pe,T(r.value[0].empNm),1),t(W),s(N).screen.xs&&w.value?(c(),S(s(Q),{key:0,outline:"",color:"primary",dense:"",class:"q-ma-xs q-pr-lg",onClick:$},{default:n(()=>[t(se,{color:"orange",floating:""},{default:n(()=>[g(T(d.value.length),1)]),_:1}),t(s(u),{name:"save",size:"xs",class:"q-mr-sm"}),g(" \uC800\uC7A5 ")]),_:1})):_("",!0)])),i("div",Fe,[t(h,{dense:"",disable:v.value,"stack-label":"","options-dense":"",class:"q-px-md","label-color":"orange",modelValue:f.value,"onUpdate:modelValue":[e[4]||(e[4]=l=>f.value=l),y],options:G.value,"option-value":"commCd","option-label":"commNm","option-disable":"inactive","emit-value":"","map-options":"",style:{"min-width":"120px","max-width":"120px"},label:"\uD3C9\uAC00\uC2B9\uC778\uAD6C\uBD84"},null,8,["disable","modelValue","options"]),t(h,{dense:"",disable:v.value,"stack-label":"","options-dense":"",class:"q-px-md q-mr-xs","label-color":"orange",modelValue:V.value,"onUpdate:modelValue":[e[5]||(e[5]=l=>V.value=l),y],options:E.value,"option-value":"deptCd","option-label":"deptNm","option-disable":"inactive","emit-value":"","map-options":"",style:{"min-width":"120px","max-width":"120px"},label:"\uC18C\uC18D\uD300"},null,8,["disable","modelValue","options"]),t(h,{dense:"",disable:v.value,"stack-label":"","options-dense":"",class:"q-px-md","label-color":"orange",modelValue:R.value,"onUpdate:modelValue":[e[6]||(e[6]=l=>R.value=l),y],options:U.value,"option-value":"titlCd","option-label":"titlNm","option-disable":"inactive","emit-value":"","map-options":"",style:{"min-width":"90px","max-width":"90px"},label:"\uC9C1\uAE09"},null,8,["disable","modelValue","options"]),t(h,{dense:"",disable:v.value,"stack-label":"","options-dense":"",class:"q-px-md","label-color":"orange",modelValue:B.value,"onUpdate:modelValue":[e[7]||(e[7]=l=>B.value=l),y],options:k.value,"option-value":"catgCd","option-label":"catgNm","option-disable":"inactive","emit-value":"","map-options":"",style:{"min-width":"90px","max-width":"90px"},label:"\uC9C1\uBD84\uB958"},null,8,["disable","modelValue","options"]),t(W),i("div",$e,[!s(N).screen.xs&&w.value?(c(),S(s(Q),{key:0,outline:"",color:"primary",dense:"",class:"q-ma-xs q-pr-lg",onClick:$},{default:n(()=>[t(se,{color:"orange",floating:""},{default:n(()=>[g(T(d.value.length),1)]),_:1}),t(s(u),{name:"save",size:"xs",class:"q-mr-sm"}),g(" \uC800\uC7A5 ")]),_:1})):_("",!0)])])]),t(X,{size:"3px"}),t(ee,{class:"q-pa-xs"},{default:n(()=>[(c(),oe("div",{key:H.value,style:ae(I.value)},[t(s(ne),{style:{width:"100%",height:"100%"},class:te(s(N).dark.isActive?"ag-theme-alpine-dark":"ag-theme-alpine"),columnDefs:he.columns,rowData:A.rows,rowSelection:F.value,defaultColDef:fe.def,onSelectionChanged:ge,onGridReady:ve},null,8,["class","columnDefs","rowData","rowSelection","defaultColDef"])],4))]),_:1})]),_:1})])])]),_:1}))}};export{ha as default};
