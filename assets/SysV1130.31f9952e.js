import{Q as z}from"./QBar.aa6ab1e6.js";import{Q as G}from"./QSelect.114f76c2.js";import{Q as I}from"./QToolbar.963c8e72.js";import{r as s,j as Ce,ad as f,p as _e,o as Se,S as x,U as g,V as S,W as r,a7 as ye,h as Ne,a5 as v,$ as h,n as a,Y as o,ab as $,a2 as P,Z as E,a1 as B,bu as J,bE as H,X as j,aa as T,a9 as y,a8 as F,a0 as Ye,I as M}from"./index.7f77393b.js";import{Q as De}from"./QSpace.d904af94.js";import{C as Z}from"./ClosePopup.a28dc14a.js";/* empty css                        */import{A as L}from"./main.esm.3000f5c9.js";import{u as Ve}from"./use-quasar.49a49e75.js";import{_ as u,a as be,b as Pe,c as We,d as ke,e as Re,f as qe,g as Ue,h as Ae}from"./CompToggleLoc.ab22ff2f.js";import{l as W}from"./lodash.de417675.js";import{j as Qe,n as Oe}from"./json-util.159ec565.js";import{u as ze}from"./setYearInfo.8b7f3a45.js";import"./QField.5fb0fda7.js";import"./QItemSection.f93cdc59.js";import"./QItemLabel.4a9918b4.js";import"./QMenu.0a3c81a9.js";import"./position-engine.150cbc63.js";import"./selection.004dbe93.js";import"./rtl.276c3f1b.js";import"./_commonjsHelpers.b8add541.js";const Ge={class:"row q-col-gutter-md"},Ie={class:"col-12 col-md-4"},$e=h("span",{class:"text-subtitle2 q-px-sm"},"\uD504\uB85C\uADF8\uB7A8 \uB9AC\uC2A4\uD2B8",-1),Ee={class:"col-12 col-md-8"},Be=h("span",{class:"text-subtitle2 q-px-sm"},"\uC0AC\uC6A9\uC790 \uAD8C\uD55C\uAD00\uB9AC",-1),Je={key:1,class:"text-subtitle1 text-bold q-px-lg q-py-xs text-secondary rounded-borders"},He={key:0,class:"q-pl-xs"},ha={__name:"SysV1130",setup(je){const X=ze(),w=Ve(),k=s(500),R=Ce(()=>({height:`${k.value}px`})),K=s(null),ee=s(null),q=f({rows:[]}),N=s(),p=s(),ae=s(),U=s(null),d=f({rows:[]}),Y=s([]),i=s([]),C=s(!1),m=s({textValue:"",evsCd:null,deptCd:null,titlCd:null,catgCd:null,evsOptions:[],deptOptions:[],titlOptions:[],catgOptions:[]}),te=e=>{K.value=e.api},le=e=>{ee.value=e.api},se={setup(e){const{params:l}=e;return()=>Ne(v,{name:l.value,color:"",size:"xs"})}},re=f({def:{flex:1,sortable:!0,filter:!1,floatingFilter:!1,editable:!1}}),oe=f({columns:[{headerName:"#",minWidth:60,maxWidth:60,sortable:!1,valueGetter:function(e){return e.node.rowIndex+1}},{headerName:"\uCF54\uB4DC",field:"progId",minWidth:100,maxWidth:100,filter:!0},{headerName:"Icon",field:"iconNm",minWidth:70,cellStyle:{textAlign:"center"},cellRenderer:se},{headerName:"\uD504\uB85C\uADF8\uB7A8\uBA85",field:"progNm",minWidth:140,filter:!0}]}),ne=f({def:{flex:1,sortable:!0,filter:!1,floatingFilter:!1,editable:!1}}),de=f({columns:[{headerName:"#",width:60,pinned:"left",valueGetter:function(e){return e.node.rowIndex+1}},{headerName:"ID",field:"userId",minWidth:120,maxWidth:120,filter:!0,sortable:!0,resizable:!0,pinned:"left"},{headerName:"\uC0AC\uC6A9\uC790\uBA85",field:"userNm",minWidth:130,maxWidth:130,filter:!0,pinned:"left"},{headerName:"\uC0AC\uBC88",field:"empCd",minWidth:100,maxWidth:100,filter:!0},{headerName:"\uC870\uD68C",headerComponent:u,headerComponentParams:{headerCheckYn:"",updateSelectedValue:e=>{c("scrYn",e.value?"Y":"N")}},field:"scrYn",maxWidth:100,minWidth:100,cellStyle:{textAlign:"center"},cellRenderer:be,cellRendererParams:{updateSelectedValue:e=>{n()}}},{headerName:"\uC785\uB825",headerComponent:u,headerComponentParams:{headerCheckYn:"",updateSelectedValue:e=>{c("newYn",e.value?"Y":"N")}},field:"newYn",maxWidth:100,minWidth:100,cellStyle:{textAlign:"center"},cellRenderer:Pe,cellRendererParams:{updateSelectedValue:e=>{n()}}},{headerName:"\uC218\uC815",headerComponent:u,headerComponentParams:{headerCheckYn:"",updateSelectedValue:e=>{c("dbgYn",e.value?"Y":"N")}},field:"dbgYn",maxWidth:100,minWidth:100,cellStyle:{textAlign:"center"},cellRenderer:We,cellRendererParams:{updateSelectedValue:e=>{n()}}},{headerName:"\uC0AD\uC81C",headerComponent:u,headerComponentParams:{headerCheckYn:"",updateSelectedValue:e=>{c("delYn",e.value?"Y":"N")}},field:"delYn",maxWidth:100,minWidth:100,cellStyle:{textAlign:"center"},cellRenderer:ke,cellRendererParams:{updateSelectedValue:e=>{n()}}},{headerName:"\uCD9C\uB825",headerComponent:u,headerComponentParams:{headerCheckYn:"",updateSelectedValue:e=>{c("rptYn",e.value?"Y":"N")}},field:"rptYn",maxWidth:100,minWidth:100,cellStyle:{textAlign:"center"},cellRenderer:Re,cellRendererParams:{updateSelectedValue:e=>{n()}}},{headerName:"\uC5D1\uC140",headerComponent:u,headerComponentParams:{headerCheckYn:"",updateSelectedValue:e=>{c("excYn",e.value?"Y":"N")}},field:"excYn",maxWidth:100,minWidth:100,cellStyle:{textAlign:"center"},cellRenderer:qe,cellRendererParams:{updateSelectedValue:e=>{n()}}},{headerName:"\uB9C8\uAC10 ",headerComponent:u,headerComponentParams:{headerCheckYn:"",updateSelectedValue:e=>{c("locYn",e.value?"Y":"N")}},field:"locYn",maxWidth:100,minWidth:100,cellStyle:{textAlign:"center"},cellRenderer:Ue,cellRendererParams:{updateSelectedValue:e=>{n()}}},{headerName:"\uC2B9\uC778",headerComponent:u,headerComponentParams:{headerCheckYn:"",updateSelectedValue:e=>{c("appYn",e.value?"Y":"N")}},field:"appYn",maxWidth:100,minWidth:100,cellStyle:{textAlign:"center"},cellRenderer:Ae,cellRendererParams:{updateSelectedValue:e=>{n()}}}]}),ie=e=>{N.value=e.api.getSelectedRows(),W.exports.isEmpty(N.value)||(p.value=N.value[0],V())},ce=e=>{ae.value=e.api.getSelectedRows()},n=()=>{i.value=[];for(let e=0;Y.value.length>e;e++)JSON.stringify(Y.value[e])!==JSON.stringify(d.rows[e])&&i.value.push(d.rows[e]);C.value=i.value.length>0},ue=s(null),c=(e,l)=>{for(let t=0;t<d.rows.length;t++)d.rows[t][e]&&(d.rows[t][e]=l);n()},A=s(0),pe=e=>(A.value=e,{minHeight:e?`calc(100vh - ${e}px)`:"100vh"}),D=()=>{k.value=window.innerHeight-A.value-180};_e(()=>{window.removeEventListener("resize",D)}),Se(()=>{window.addEventListener("resize",D),D(),U.value="single",Q(),xe()});const Q=()=>{ve(),O()},me=()=>{let e=[],l=[];for(let t=0;t<i.value.length;t++){i.value[t].progId=p.value.progId;let we='{"mode": "'+i.value[t].iuD+'","data":'+JSON.stringify(i.value[t])+"}";e.push(we)}W.exports.isEmpty(e)&&W.exports.isEmpty(l)?w.dialog({dark:!0,title:"\uC548\uB0B4",message:"\uBCC0\uACBD\uB41C \uC790\uB8CC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4. "}).onOk(()=>{}).onCancel(()=>{}).onDismiss(()=>{}):(ge(Qe.jsonFiller(e,l)),setTimeout(()=>{V()},500))},he=e=>{O()},fe=e=>{V()},O=async()=>{try{const e=await x.post("/api/sys/sys5010_menu_list",{groupCd:_.value});q.rows=e.data.data}catch(e){console.error("Error fetching users:",e)}p.value=null,d.rows=[]},V=async()=>{try{const e=await x.post("/api/sys/sys1130_user_list",{paramDeptCd:m.value.deptCd,paramProgId:p.value.progId});d.rows=e.data.data,Y.value=JSON.parse(JSON.stringify(e.data.data)),i.value=[],C.value=!1}catch(e){console.error("Error fetching users:",e)}},ge=e=>{x.post("/api/sys/sys1110_grntp_save",e).then(l=>{C.value=!1;let t={};t.rtn=l.data.rtn,t.rtnMsg=l.data.rtnMsg,Oe.notifyView(t)}).catch(l=>{console.log("error: ",l)})},b=s([]),_=s(""),ve=async()=>{try{const e=await x.post("/api/sys/prog_group_list",{});b.value=e.data.data,b.value.unshift({groupNm:"\uC804\uCCB4",groupCd:""}),_.value=""}catch(e){console.error("Error fetching users:",e)}};async function xe(){try{const e=await x.post("/api/mst/dept_option_list",{paramSetYear:X.setYear});m.value.deptOptions=e.data.data,m.value.deptOptions.unshift({deptCd:"",deptNm:"\uC804\uCCB4"}),m.value.deptCd=""}catch(e){console.error("Error fetching users:",e)}}return(e,l)=>(g(),S(ye,{class:"q-pa-xs-xs q-pa-sm-md","style-fn":pe},{default:r(()=>[h("div",Ge,[h("div",Ie,[a(T,{bordered:""},{default:r(()=>[a(z,{class:"q-px-sm"},{default:r(()=>[a(o(v),{name:"list_alt"}),$e]),_:1}),a($,{align:"right",class:"q-pa-none"},{default:r(()=>[a(I,{class:"row"},{default:r(()=>[a(G,{dense:"","stack-label":"","options-dense":"",class:"q-pb-sm q-pl-sm q-mr-lg","label-color":"orange",modelValue:_.value,"onUpdate:modelValue":[l[0]||(l[0]=t=>_.value=t),he],options:b.value,"option-value":"groupCd","option-label":"groupNm","option-disable":"inactive","emit-value":"","map-options":"",style:{"min-width":"150px","max-width":"150px"},label:"\uADF8\uB8F9\uC120\uD0DD"},null,8,["modelValue","options"]),a(o(P),{outline:"",color:"positive",dense:"",onClick:Q},{default:r(()=>[a(o(v),{class:"q-mr-sm",name:"refresh",size:"xs"}),E("\uB2E4\uC2DC \uBD88\uB7EC\uC624\uAE30")]),_:1})]),_:1})]),_:1}),a(B,{size:"3px"}),a(J,{class:"q-pa-xs"},{default:r(()=>[h("div",{style:H(R.value)},[a(o(L),{ref:"myGrid",style:{width:"100%",height:"100%"},class:j(o(w).dark.isActive?"ag-theme-alpine-dark":"ag-theme-alpine"),columnDefs:oe.columns,rowData:q.rows,defaultColDef:re.def,rowSelection:U.value,onSelectionChanged:ie,onGridReady:te},null,8,["class","columnDefs","rowData","defaultColDef","rowSelection"])],4)]),_:1})]),_:1})]),h("div",Ee,[a(T,{bordered:""},{default:r(()=>[a(z,{class:"q-px-sm"},{default:r(()=>[a(o(v),{name:"list_alt"}),Be]),_:1}),a($,{align:"right",class:"q-pa-none"},{default:r(()=>[a(I,{class:"row"},{default:r(()=>[p.value?(g(),S(G,{key:0,dense:"","options-dense":"",class:"q-pb-sm q-pl-sm q-mr-lg","label-color":"orange",modelValue:m.value.deptCd,"onUpdate:modelValue":[l[1]||(l[1]=t=>m.value.deptCd=t),fe],options:m.value.deptOptions,"option-value":"deptCd","option-label":"deptNm","option-disable":"inactive","emit-value":"","map-options":"",style:{"min-width":"150px","max-width":"150px"},label:"\uC18C\uC18D\uD300"},null,8,["modelValue","options"])):y("",!0),p.value?(g(),F("span",Je," [ "+Ye(p.value.progNm)+" ] ",1)):y("",!0),a(De),C.value?M((g(),S(o(P),{key:2,outline:"",dense:"",color:"primary",onClick:me,class:"q-px-sm q-mr-sm"},{default:r(()=>[a(o(v),{class:"q-mr-xs",name:"save",size:"xs"}),E(" \uAD8C\uD55C \uC801\uC6A9\uD558\uAE30 ")]),_:1})),[[Z]]):y("",!0),M((g(),S(o(P),{outline:"",dense:"",color:"primary",class:"q-px-sm"},{default:r(()=>[a(o(v),{name:"close",size:"xs"}),o(w).screen.xs?y("",!0):(g(),F("span",He,"\uB2EB\uAE30"))]),_:1})),[[Z]])]),_:1})]),_:1}),a(B,{size:"3px"}),a(J,{class:"q-pa-xs"},{default:r(()=>[h("div",{style:H(R.value)},[a(o(L),{ref:"myGrid1",style:{width:"100%",height:"100%"},class:j(o(w).dark.isActive?"ag-theme-alpine-dark":"ag-theme-alpine"),columnDefs:de.columns,rowData:d.rows,defaultColDef:ne.def,rowSelection:ue.value,onSelectionChanged:ce,onCellValueChanged:n,onGridReady:le},null,8,["class","columnDefs","rowData","defaultColDef","rowSelection"])],4)]),_:1})]),_:1})])])]),_:1}))}};export{ha as default};
