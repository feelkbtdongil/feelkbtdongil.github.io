import{Q as O}from"./QBar.aa6ab1e6.js";import{Q as me}from"./QSelect.114f76c2.js";import{Q as N}from"./QSpace.d904af94.js";import{R as pe,r as n,j as ve,ad as fe,p as ge,k as _e,o as he,S,U as x,V as q,W as r,a7 as be,$ as d,n as t,Y as s,a5 as c,ab as Y,a6 as xe,X as D,a1 as J,bu as Z,bE as W,a0 as g,aa as A,aJ as ye,Z as $,a9 as I,a8 as ke,a2 as X,b8 as we,b9 as Se}from"./index.7f77393b.js";import{Q as K}from"./QToolbar.963c8e72.js";import{Q as qe}from"./QTree.b2f41e34.js";import{Q as De}from"./QEditor.de7eb6c0.js";/* empty css                        */import"./main.esm.3000f5c9.js";import{u as Ie}from"./use-quasar.49a49e75.js";import{l as ee}from"./lodash.de417675.js";import{j as ae,n as ze}from"./json-util.159ec565.js";import"./QField.5fb0fda7.js";import"./QItemSection.f93cdc59.js";import"./QItemLabel.4a9918b4.js";import"./QMenu.0a3c81a9.js";import"./position-engine.150cbc63.js";import"./selection.004dbe93.js";import"./rtl.276c3f1b.js";import"./QTooltip.472888d5.js";import"./_commonjsHelpers.b8add541.js";const te=y=>(we("data-v-678fc130"),y=y(),Se(),y),Ee={class:"row q-col-gutter-md"},Qe={class:"col-12 col-md-3"},Ve=te(()=>d("span",{class:"text-subtitle2 q-px-sm"},"\uD504\uB85C\uADF8\uB7A8 \uB9AC\uC2A4\uD2B8",-1)),Ce={class:"row items-center"},Ue={class:"text-bold text-blue"},Be={class:"row items-center"},Ne={class:"row items-center"},Ae={class:""},$e={class:"col-12 col-md-9"},Pe=te(()=>d("span",{class:"text-subtitle2 q-px-sm"},"\uD504\uB85C\uADF8\uB7A8 \uC0AC\uC6A9\uC124\uBA85\uC11C \uAD00\uB9AC (\uC0AC\uC6A9\uC790\uC6A9)",-1)),Te={key:0,class:"text-subtitle1 text-bold shadow-5 q-px-lg q-py-xs bg-secondary rounded-borders"},Fe={__name:"SysV4020",setup(y){const l=Ie(),P=n(500),T=ve(()=>({height:`${P.value}px`})),z=n([]),_=n(null),p=n(""),F=n(null),h=n(null),u=n(null),k=n(null),L=n(null),se=()=>{p.value="",F.value.focus()},oe=n(null),i=n({progId:"",contents:""});n(!0);const v=fe({icon:"",message:""});let f="";const E=n(!1),w=n(!1),Q=n(!1),m=n({submenuName:"",menuData:{}}),le=()=>{m.value.menuData=M(z.value,_.value),m.value.menuData?(Q.value=!0,m.value.menuData.children.length===0&&(u.value=m.value.menuData.progId,k.value=m.value.menuData.label,ue(u.value),setTimeout(()=>{L.value.focus()},100))):(Q.value=!1,w.value=!1,u.value=null,k.value=null,i.value.progId=null,i.value.contents=null)};function M(o,a){for(const e of o){if(e.id===a)return e;if(e.children){const b=M(e.children,a);if(b!==null)return b}}return null}const j=n(0),ne=o=>(j.value=o,{minHeight:o?`calc(100vh - ${o}px)`:"100vh"}),V=()=>{P.value=window.innerHeight-j.value-180};ge(()=>{window.removeEventListener("resize",V)}),_e(()=>{ce(),setTimeout(()=>{R()},500)}),he(()=>{window.addEventListener("resize",V),V()});const re=()=>{ee.exports.isEqual(i.value,oe.value)?l.dialog({dark:!0,title:"\uC548\uB0B4",message:"\uBCC0\uACBD\uB41C \uC790\uB8CC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4. "}).onOk(()=>{}).onCancel(()=>{}).onDismiss(()=>{}):(H(ae.dataJsonParse(f,i.value)),_.value=null)},ie=()=>{f="D",l.dialog({dark:!0,title:"\uC790\uB8CC\uC0AD\uC81C",message:"\uC120\uD0DD\uB41C \uC790\uB8CC\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C? ",ok:{push:!0,color:"negative"},cancel:{push:!0,color:"grey-7"}}).onOk(()=>{H(ae.dataJsonParse(f,i.value)),_.value=null}).onCancel(()=>{}).onDismiss(()=>{})},R=()=>{G()};let C=[];const U=n([]);function de(o){C=[];const a={};return o.forEach(e=>{a[e.menuId]={...e,children:[]}}),Object.values(a).forEach(e=>{if(U.value.push(e.id),e.menuParent==="#")C.push(e),m.value.submenuName=e.labelExt,m.value.menuData={};else{const b=a[e.menuParent]||a[e.menuId];b&&b.children.push(e)}}),C}const G=async()=>{const o={paramGroupCd:h.value};try{const a=await S.post("/api/sys/sys4020_list",o);z.value=de(a.data.data),u.value=null,k.value=null,i.value.progId=null,i.value.contents=null,Q.value=!1}catch(a){console.error("Error fetching users:",a)}},ue=async o=>{const a={paramProgId:o};try{const e=await S.post("/api/sys/sys4020_docU_select",a);ee.exports.isEmpty(e.data.data)?(f="I",i.value.progId=u.value,i.value.contents="",E.value=!0,v.icon="edit_note",v.message="\uC2E0\uADDC\uBAA8\uB4DC \uC785\uB2C8\uB2E4",w.value=!1):(f="U",i.value.progId=e.data.data[0].progId,i.value.contents=e.data.data[0].contents,E.value=!0,v.icon="edit_note",v.message="\uC218\uC815/\uC0AD\uC81C\uBAA8\uB4DC \uC785\uB2C8\uB2E4",w.value=!0)}catch(e){console.error("Error fetching users:",e)}},H=o=>{S.post("/api/sys/sys4020_docU_save",o).then(a=>{a.data.rtn==="0"&&(f==="I"&&(i.value.oldUserId=i.value.userId),G());let e={};e.rtn=a.data.rtn,e.rtnMsg=a.data.rtnMsg,ze.notifyView(e)}).catch(a=>{console.log("error: ",a)})},B=n([]),ce=async()=>{try{const o=await S.post("/api/sys/prog_group_list",{paramUserId:""});B.value=[],o.data.data.forEach(a=>{h.value||(h.value=a.groupCd),B.value.push(a)})}catch(o){console.error("Error fetching users:",o)}};return(o,a)=>(x(),q(be,{class:"q-pa-xs-xs q-pa-sm-md","style-fn":ne},{default:r(()=>[d("div",Ee,[d("div",Qe,[t(A,{bordered:""},{default:r(()=>[t(O,{class:"q-px-sm"},{default:r(()=>[t(s(c),{name:"list_alt"}),Ve]),_:1}),t(Y,{align:"right",class:"q-pa-none"},{default:r(()=>[t(K,{class:"row"},{default:r(()=>[t(me,{style:{width:"100px"},dense:"","label-color":"orange",label:"\uBA54\uC778\uADF8\uB8F9\uBA85",modelValue:h.value,"onUpdate:modelValue":[a[0]||(a[0]=e=>h.value=e),R],options:B.value,"option-value":"groupCd","option-label":"groupNm","options-dense":"","emit-value":"","map-options":""},null,8,["modelValue","options"]),t(N),t(xe,{dense:"","stack-label":"","label-color":"orange",ref_key:"filterRef",ref:F,modelValue:p.value,"onUpdate:modelValue":a[1]||(a[1]=e=>p.value=e),label:"\uD504\uB85C\uADF8\uB7A8\uAC80\uC0C9",style:{width:"130px"}},{append:r(()=>[t(s(c),{size:"xs",name:p.value!==""?"clear search":"search",class:D(["cursor-pointer",p.value!==""?"q-pr-md":""]),onClick:se},null,8,["name","class"])]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(J,{size:"3px"}),t(Z,{class:"q-pa-xs"},{default:r(()=>[d("div",{style:W(T.value),class:D(["q-editor q-py-sm",s(l).dark.isActive?"bg-dark":"bg-white"])},[t(qe,{dense:"",nodes:z.value,"node-key":"id",filter:p.value,expanded:U.value,"onUpdate:expanded":a[2]||(a[2]=e=>U.value=e),"no-connectors":"",selected:_.value,"onUpdate:selected":a[3]||(a[3]=e=>_.value=e),onClick:le},{"header-folder":r(e=>[d("div",Ce,[t(s(c),{color:"blue",size:"12px",class:"q-mr-sm",name:e.node.icon||"share"},null,8,["name"]),d("div",Ue,g(o.$te(e.node.labelExt)?o.$t(e.node.labelExt):e.node.label),1)])]),"header-file":r(e=>[d("div",Be,[t(s(c),{color:e.node.docUyn==="Y"?s(l).dark.isActive?"white":"dark":s(l).dark.isActive?"grey-7":"grey-5",class:D([e.node.docUyn==="Y"?"text-bold":"","q-mr-sm"]),size:"12px",name:e.node.icon||"share"},null,8,["color","class","name"]),d("div",{class:D(e.node.docUyn==="Y"?s(l).dark.isActive?"text-bold text-white":"text-bold text-dark":s(l).dark.isActive?"text-grey-5":"text-grey-7")},g(o.$te(e.node.labelExt)?o.$t(e.node.labelExt):e.node.label),3)])]),"default-header":r(e=>[d("div",Ne,[t(s(c),{color:s(l).dark.isActive?"white":"dark",size:"12px",class:"q-mr-sm",name:e.node.icon||"share"},null,8,["color","name"]),d("div",Ae,g(o.$te(e.node.labelExt)?o.$t(e.node.labelExt):e.node.label),1)])]),_:1},8,["nodes","filter","expanded","selected"])],6)]),_:1})]),_:1})]),d("div",$e,[t(A,{bordered:""},{default:r(()=>[t(O,{class:"q-px-sm"},{default:r(()=>[t(s(c),{name:"list_alt"}),Pe,t(N),E.value?(x(),q(ye,{key:0,size:"sm",outline:"",color:s(l).dark.isActive?"white":"dark",class:"q-px-md"},{default:r(()=>[t(s(c),{name:v.icon,class:"q-mr-sm",size:"15px"},null,8,["name"]),$(" "+g(v.message),1)]),_:1},8,["color"])):I("",!0)]),_:1}),t(Y,{align:"right",class:"q-pa-none"},{default:r(()=>[t(K,{class:"row"},{default:r(()=>[u.value?(x(),ke("span",Te,g(k.value)+" ( "+g(u.value)+" )",1)):I("",!0),t(N),u.value?(x(),q(s(X),{key:1,outline:"",dense:"",color:"primary",onClick:re,class:"q-px-sm q-mr-sm"},{default:r(()=>[t(s(c),{class:"q-mr-xs",name:"save",size:"xs"}),$(" \uC800\uC7A5 ")]),_:1})):I("",!0),w.value?(x(),q(s(X),{key:2,outline:"",dense:"",color:"negative",onClick:ie,class:"q-px-sm q-mr-sm"},{default:r(()=>[t(s(c),{class:"q-mr-xs",name:"delete",size:"xs"}),$(" \uC0AD\uC81C ")]),_:1})):I("",!0)]),_:1})]),_:1}),t(J,{size:"3px"}),t(Z,{class:"q-pa-xs"},{default:r(()=>[t(A,{flat:"",bordered:"",class:"q-ma-xs q-pa-none"},{default:r(()=>[t(De,{disable:!u.value,class:"q-editor",style:W(T.value),ref_key:"contentsFocus",ref:L,modelValue:i.value.contents,"onUpdate:modelValue":a[4]||(a[4]=e=>i.value.contents=e),dense:s(l).screen.lt.md,toolbar:[[{label:s(l).lang.editor.align,icon:s(l).iconSet.editor.align,fixedLabel:!0,list:"only-icons",options:["left","center","right","justify"]},{label:s(l).lang.editor.align,icon:s(l).iconSet.editor.align,fixedLabel:!0,options:["left","center","right","justify"]}],["bold","italic","strike","underline","subscript","superscript"],["token","hr","link","custom_btn"],["print","fullscreen"],[{label:s(l).lang.editor.formatting,icon:s(l).iconSet.editor.formatting,list:"no-icons",options:["p","h1","h2","h3","h4","h5","h6","code"]},{label:s(l).lang.editor.fontSize,icon:s(l).iconSet.editor.fontSize,fixedLabel:!0,fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},{label:s(l).lang.editor.defaultFont,icon:s(l).iconSet.editor.font,fixedIcon:!0,list:"no-icons",options:["default_font","arial","arial_black","comic_sans","courier_new","impact","lucida_grande","times_new_roman","verdana"]},"removeFormat"],["quote","unordered","ordered","outdent","indent"],["undo","redo"],["viewsource"]],fonts:{arial:"Arial",arial_black:"Arial Black",comic_sans:"Comic Sans MS",courier_new:"Courier New",impact:"Impact",lucida_grande:"Lucida Grande",times_new_roman:"Times New Roman",verdana:"Verdana"}},null,8,["disable","style","modelValue","dense","toolbar"])]),_:1})]),_:1})]),_:1})])])]),_:1}))}};var ia=pe(Fe,[["__scopeId","data-v-678fc130"]]);export{ia as default};
