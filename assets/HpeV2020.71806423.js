import{Q as ae}from"./QBanner.bf865535.js";import{Q as M}from"./QSpace.ddaf28ca.js";import{Q as oe,a as U}from"./QBreadcrumbs.77ef454b.js";import{r as d,ad as E,j as ne,p as re,k as ie,o as ce,aB as de,S as H,U as k,V as D,W as n,a7 as ue,n as s,$ as t,X as g,Y as r,a5 as w,Z as c,aa as p,a1 as me,bu as pe,a4 as R,a2 as N,bE as he,a0 as v,a9 as W,a8 as ve,ag as ge,bK as C,F as xe}from"./index.07fc3cde.js";import{Q as fe}from"./QItemLabel.848dda36.js";import{Q as F}from"./QToolbar.e70c6bf5.js";import{Q as G}from"./QBadge.76c358a2.js";/* empty css                        */import{A as _e}from"./main.esm.15e3c1e8.js";import"./lodash.de417675.js";import{j as Y,n as be}from"./json-util.73e249df.js";import{u as ke}from"./use-quasar.9559018b.js";import{u as we}from"./setUserInfo.4ca40c19.js";import{u as Ce}from"./setYearInfo.f0ebbaa1.js";import"./_commonjsHelpers.b8add541.js";const qe={class:"row"},ye={class:"col-xs-12 col-sm-12 col-lg-8"},Se=t("span",{class:"text-subtitle1 text-bold"}," \uBAA9\uD45C\uC5D0\uB300\uD55C \uC131\uACFC\uBC0F\uC5C5\uC801\uC5D0 \uB300\uD55C \uD3C9\uAC00\uC791\uC5C5\uC785\uB2C8\uB2E4.",-1),Ve=t("br",null,null,-1),Ee=t("span",{class:"text-teal text-bold"},"\uD3C9\uAC00\uB300\uAE30",-1),De=t("br",null,null,-1),ze=t("span",{class:"text-teal text-bold"},"\uD3C9\uAC00\uB9C8\uAC10",-1),Be=t("br",null,null,-1),Qe={class:"col-xs-12 col-sm-12 col-lg-4"},Me={class:"row"},Ue={class:"text-bold text-subtitle2 q-pr-sm text-orange"},He={class:"col-xs-12 col-md-12 col-lg-4"},Ne={class:"col-xs-12 col-md-12 col-lg-8"},Ye={class:"row q-gutter-x-sm"},Ae={class:"row"},Pe={class:"row"},Te=t("div",{class:"bg-deep-orange-3 text-center text-subtitle2 text-bold q-px-xs"},"\uC21C\uBC88",-1),Le=t("div",{class:"bg-deep-orange-3 text-center text-subtitle2 text-bold q-px-xs"},"\uBAA9\uD45C\uC124\uC815",-1),Oe=["innerHTML"],Re=t("div",{class:"bg-deep-orange-3 text-center text-subtitle2 text-bold q-px-xs"},"\uAE30\uC900\uC124\uC815",-1),We={class:"q-pa-xs"},Fe={class:"q-px-sm"},Ge=t("br",null,null,-1),Ie={class:"q-px-sm"},$e=t("br",null,null,-1),je={class:"q-px-sm"},Je=t("br",null,null,-1),Ze={class:"q-px-sm"},Ke=t("br",null,null,-1),Xe={class:"q-px-sm"},et=t("div",{class:"bg-deep-orange-3 text-center text-subtitle2 text-bold q-px-xs"},"\uC131\uACFC/\uC5C5\uC801",-1),tt=["innerHTML"],st=t("div",{class:"bg-deep-orange-3 text-center text-subtitle2 text-bold q-px-xs"},"\uAC00\uC911\uCE58",-1),lt=t("div",{class:"bg-deep-orange-3 text-center text-subtitle2 text-bold q-px-xs"},"\uC790\uAE30\uD3C9\uAC00",-1),at={class:"row"},ot={class:"col-xs-12 col-sm-5 text-center"},nt={class:"col-xs-12 col-sm-2 text-center self-center text-subtitle1 text-bold"},rt=46,qt={__name:"HpeV2020",setup(it){const q=we(),I=Ce();d(!1);const h=E({rows:[]}),x=d(!1),A=d(200);d(135);const P=d(90);d(135);const u=ke();let y=null;d(0);const T=d(300);ne(()=>({height:`${T.value}px`}));const f=d(null);d(null);const $=a=>{f.value=a.api,f.value.setGridOption("headerHeight",45),f.value.setGridOption("rowHeight",45),f.value.deselectAll()},j=E({group:{flex:1,sortable:!0,filter:!0,floatingFilter:!1,editable:!1}}),J=E({group:[{headerName:"#",width:50,pinned:"left",sortable:!1,filter:!1,valueGetter:function(a){return a.node.rowIndex+1}},{headerName:"\uC131\uBA85",field:"evtEmpNm",minWidth:80,maxWidth:80,resizable:!0},{headerName:"\uC18C\uC18D\uD300",field:"evtDeptNm",minWidth:100,resizable:!0},{headerName:"\uC9C1\uAE09",field:"evtTitlNm",minWidth:80,maxWidth:80,resizable:!0},{headerName:"\uC9C4\uD589\uC0C1\uD0DC",field:"statusMessage",minWidth:105,maxWidth:105,cellStyle:a=>L(a.data)}]}),L=a=>a.statusMessage==="\uD3C9\uAC00\uC911"?u.dark.isActive?{color:"teal"}:{color:"teal"}:a.statusMessage==="\uD3C9\uAC00\uC644\uB8CC"?u.dark.isActive?{color:"orange"}:{color:"blue"}:a.statusMessage==="\uD3C9\uAC00\uB9C8\uAC10"?u.dark.isActive?{color:"red"}:{color:"red"}:{};re(()=>{console.log("onBeforeUnmount...."),window.removeEventListener("resize",z)}),ie(()=>{console.log("onBeforeMount...."),V()});const _=d(null),S=E({height:0});ce(()=>{console.log("onMounted...."),window.addEventListener("resize",z),z(),_.value&&(S.height=_.value.clientHeight,console.log("size 1 : ",S.height))}),de(()=>{console.log("onUpdated...."),_.value&&(S.height=_.value.clientHeight,console.log("size 2 : ",S.height))}),d({stdYear:"",evtEmpCd:"",seq:0,returnDoc:"",status:""});const i=d({lock:!1,lockBtn:!1,initialize:!1,cnt:0}),m=d([]),Z=a=>{m.value=a.api.getSelectedRows(),i.value.lockBtn=!1,i.value.initialize=!1,x.value=!1,i.value.cnt=0,m.value.length===1&&(m.value[0].status>"3"?se(m.value[0]).then(()=>{const l=h.rowsSel.filter(e=>e.markPoint>0).length;m.value[0].status==="5"&&(i.value.lockBtn=!1,i.value.initialize=!1,x.value=!0),m.value[0].status==="4"&&m.value[0].workCount===l&&(i.value.initialize=!0,i.value.lockBtn=!0,i.value.cnt=l)}):m.value[0].status!==""&&(h.rowsSel=[],u.dialog({dark:!0,title:"\uBAA9\uD45C\uC131\uACFC",html:!0,message:"\uBAA9\uD45C\uC131\uACFC \uC791\uC131\uC911\uC785\uB2C8\uB2E4. <br />\uBAA9\uD45C\uC131\uACFC\uC791\uC5C5 \uC644\uB8CC \uD6C4 \uC791\uC5C5\uC774 \uAC00\uB2A5\uD569\uB2C8\uB2E4."})))},b=(a,l)=>{switch(a){case"S":l.markPoint=100;break;case"A":l.markPoint=90;break;case"B":l.markPoint=80;break;case"C":l.markPoint=70;break;case"D":l.markPoint=60;break;default:l.markPoint=0;break}B(Y.dataJsonParse("I",l)),setTimeout(()=>{const e=h.rowsSel.filter(o=>o.markPoint>0).length;K(e)},500)},K=a=>{let l=f.value.getSelectedNodes()[0];l.data.lockYn==="Y"?l.data.statusMessage="\uD3C9\uAC00\uB9C8\uAC10":a===0?l.data.statusMessage="\uD3C9\uAC00\uB300\uAE30":a===l.data.workCount?(l.data.statusMessage="\uD3C9\uAC00\uC644\uB8CC",i.value.lockBtn=!0,i.value.cnt=h.rowsSel.filter(e=>e.markPoint>0).length):(l.data.statusMessage="\uD3C9\uAC00\uC911",i.value.initialize=!0,i.value.cnt=h.rowsSel.filter(e=>e.markPoint>0).length),L(l.data),f.value.applyTransaction({update:[l.data]})},O=d(0),X=a=>(O.value=a,{minHeight:a?`calc(100vh - ${a}px)`:"100vh"}),z=()=>{T.value=window.innerHeight-O.value-730},ee=a=>{u.dialog({dark:!0,title:"\uD3C9\uAC00\uCD08\uAE30\uD654",message:"\uC120\uD0DD\uB41C "+a+"\uAC74 \uD3C9\uAC00\uC790\uB8CC\uB97C \uBAA8\uB450 \uCD08\uAE30\uD654 \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C? ",ok:{push:!0,color:"negative"},cancel:{push:!0,color:"grey-7"}}).onOk(()=>{y="D";let l=[],e=[],o={};o.stdYear=m.value[0].stdYear,o.evsEmpCd=m.value[0].evsEmpCd,o.evtEmpCd=m.value[0].evtEmpCd;let Q='{"mode": "'+y+'","data":'+JSON.stringify(o)+"}";e.push(Q),B(Y.jsonFiller(l,e)),setTimeout(()=>{V()},500)}).onCancel(()=>{}).onDismiss(()=>{})},te=a=>{u.dialog({dark:!0,title:"\uD3C9\uAC00\uB9C8\uAC10\uD558\uAE30",message:"\uC120\uD0DD\uB41C "+a+"\uAC74\uC758 \uD3C9\uAC00\uC790\uB8CC\uB97C \uBAA8\uB450 \uB9C8\uAC10 \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C? ",ok:{push:!0,color:"orange"},cancel:{push:!0,color:"grey-7"}}).onOk(()=>{y="S";let l=[],e=[],o={};o.stdYear=m.value[0].stdYear,o.evsEmpCd=m.value[0].evsEmpCd,o.evtEmpCd=m.value[0].evtEmpCd,o.status="5",o.acceptYn="Y",o.lockYn="Y";let Q='{"mode": "'+y+'","data":'+JSON.stringify(o)+"}";l.push(Q),B(Y.jsonFiller(l,e)),setTimeout(()=>{V()},500)}).onCancel(()=>{}).onDismiss(()=>{})};d({totalCnt:0,status_0:0,status_3:0,status_4:0,status_5:0});const V=async()=>{try{const a=await H.post("/api/hpe/hpe2020_list",{paramSetYear:I.setYear,paramEvsEmpCd:q.setEmpCd});h.rows=a.data.data,h.rows.length===0&&(P.value=220);const l=h.rows.length*rt;A.value=P.value+l,h.rowsSel=[]}catch(a){console.error("Error fetching users:",a)}},se=async a=>{try{const l=await H.post("/api/hpe/hpe2020_select_list",{paramSetYear:a.stdYear,paramEvsEmpCd:a.evsEmpCd,paramEvtEmpCd:a.evtEmpCd});h.rowsSel=l.data.data}catch(l){console.error("Error fetching users:",l)}},B=a=>{H.post("/api/hpe/hpe2020_save",a).then(l=>{let e={};e.rtn=l.data.rtn,e.rtnMsg=l.data.rtnMsg,be.notifyView(e)}).catch(l=>{console.log("error: ",l)})},le={localeText:{noRowsToShow:"\uC870\uD68C \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}};return(a,l)=>(k(),D(ue,{class:"q-pa-xs-xs q-pa-sm-md","style-fn":X},{default:n(()=>[s(p,{class:"q-pa-sm"},{default:n(()=>[t("div",qe,[t("div",ye,[s(ae,{rounded:"",class:g(r(u).dark.isActive?"bg-grey-9":"bg-grey-3"),style:{height:"100%"}},{avatar:n(()=>[s(r(w),{name:"menu_book",color:"primary",size:"md"})]),default:n(()=>[Se,Ve,c(" 1. "),Ee,c(" \uC790\uB8CC\uB9CC \uD3C9\uAC00\uD558\uC2E4 \uC218 \uC788\uC2B5\uB2C8\uB2E4."),De,c(" 2. \uC120\uD0DD\uD55C \uC9C1\uC6D0\uC758 \uD3C9\uAC00\uC644\uB8CC \uC2DC "),ze,c("\uBC84\uD2BC\uC774 \uD65C\uC131\uD654\uB429\uB2C8\uB2E4."),Be]),_:1},8,["class"])]),t("div",Qe,[s(p,{class:g(["q-ml-sm-md q-pa-sm",r(u).screen.xs?"q-mt-xs":"row flex-center"]),style:{height:"100%"}},{default:n(()=>[t("div",Me,[s(M),t("span",Ue,[c("\uD3C9\uAC00\uC790"),s(r(w),{name:"chevron_right",size:"xs"})]),s(oe,{separator:"|",class:"text-orange text-bold","active-color":"secondary"},{default:n(()=>[s(U,{icon:"room_preferences",label:r(q).setDeptNm,style:{width:"90px"}},null,8,["label"]),s(U,{icon:"star",label:r(q).setTitlNm,style:{width:"60px"}},null,8,["label"]),s(U,{icon:"person",label:r(q).setEmpNm,style:{width:"70px"}},null,8,["label"])]),_:1})])]),_:1},8,["class"])])])]),_:1}),s(me,{spaced:""}),s(p,{class:"q-pa-sm"},{default:n(()=>[s(pe,{class:g(["text-center q-pa-sm q-mb-sm",r(u).dark.isActive?"bg-teal-7":"bg-teal-3"])},{default:n(()=>[s(fe,{class:"text-h6"},{default:n(()=>[c("\uC131\uACFC,\uC5C5\uC801 / \uD3C9\uAC00\uD558\uAE30")]),_:1})]),_:1},8,["class"]),t("div",{ref_key:"gridZone",ref:_,class:"row q-col-gutter-x-lg"},[t("div",He,[s(p,{class:"q-pa-sm"},{default:n(()=>[s(F,{class:"row q-pa-none"},{default:n(()=>[s(R,{color:"red","text-color":"white",size:"md"},{default:n(()=>[c("1\uBC88")]),_:1}),s(M),s(r(N),{outline:"",color:"grey",dense:"",onClick:V},{default:n(()=>[s(r(w),{name:"refresh",size:"xs",class:"q-mr-xs"}),c(" \uB2E4\uC2DC \uBD88\uB7EC\uC624\uAE30 ")]),_:1})]),_:1}),t("div",{style:he({height:A.value+30+"px"})},[s(r(_e),{style:{width:"100%",height:"100%"},class:g(r(u).dark.isActive?"ag-theme-alpine-dark":"ag-theme-alpine"),columnDefs:J.group,rowData:h.rows,defaultColDef:j.group,rowSelection:"single",onSelectionChanged:Z,onGridReady:$,"grid-options":le},null,8,["class","columnDefs","rowData","defaultColDef"])],4)]),_:1})]),t("div",Ne,[s(p,{class:"q-pa-xs"},{default:n(()=>[s(F,{class:"row q-pa-none"},{default:n(()=>[s(R,{color:"red","text-color":"white",size:"md"},{default:n(()=>[c("2\uBC88")]),_:1}),s(M),t("div",Ye,[i.value.lockBtn?(k(),D(r(N),{key:0,outline:"",color:"primary",dense:"",class:"q-pr-md q-ml-sm",onClick:l[0]||(l[0]=e=>te(i.value.cnt))},{default:n(()=>[s(G,{color:"orange",floating:""},{default:n(()=>[c(v(i.value.cnt),1)]),_:1}),s(r(w),{name:"lock",size:"xs",class:"q-mr-xs"}),c(" \uD3C9\uAC00\uB9C8\uAC10\uD558\uAE30 ")]),_:1})):W("",!0),i.value.initialize>0?(k(),D(r(N),{key:1,outline:"",color:"deep-orange",dense:"",class:"q-pr-md q-ml-sm",onClick:l[1]||(l[1]=e=>ee(i.value.cnt))},{default:n(()=>[s(G,{color:"orange",floating:""},{default:n(()=>[c(v(i.value.cnt),1)]),_:1}),s(r(w),{name:"delete",size:"xs",class:"q-mr-xs"}),c(" \uD3C9\uAC00\uCD08\uAE30\uD654 ")]),_:1})):W("",!0)])]),_:1}),t("div",Ae,[(k(!0),ve(xe,null,ge(h.rowsSel,e=>(k(),D(p,{flat:"",bordered:"",style:{width:"100%"},key:e.seq,class:"q-mb-sm"},{default:n(()=>[t("div",Pe,[s(p,{class:"col-xs-12 col-sm-1"},{default:n(()=>[Te,t("div",{class:g(["text-center q-pa-xs",r(u).screen.xs?"":"row flex-center"]),style:{height:"100%"}},v(e.seq),3)]),_:2},1024),s(p,{class:"col-xs-12 col-sm-4"},{default:n(()=>[Le,t("div",{class:"q-pa-xs",innerHTML:e.targetDoc},null,8,Oe)]),_:2},1024),s(p,{class:"col-xs-12 col-sm-2"},{default:n(()=>[Re,t("div",We,[t("span",Fe,[c(" 1. "+v(e.evaS),1),Ge]),t("span",Ie,[c(" 2. "+v(e.evaA),1),$e]),t("span",je,[c(" 3. "+v(e.evaB),1),Je]),t("span",Ze,[c(" 4. "+v(e.evaC),1),Ke]),t("span",Xe," 5. "+v(e.evaD),1)])]),_:2},1024),s(p,{class:"col-xs-12 col-sm-3"},{default:n(()=>[et,t("div",{class:"q-pa-xs",innerHTML:e.workDoc},null,8,tt)]),_:2},1024),s(p,{class:"col-xs-12 col-sm-1"},{default:n(()=>[st,t("div",{class:g(["text-center q-pa-xs",r(u).screen.xs?"":"row flex-center"]),style:{height:"100%"}},v(e.weight),3)]),_:2},1024),s(p,{class:"col-xs-12 col-sm-1"},{default:n(()=>[lt,t("div",{class:g(["text-center q-pa-xs",r(u).screen.xs?"":"row flex-center"]),style:{height:"100%"}},v(e.selfPoint),3)]),_:2},1024)]),s(p,{bordered:"",class:"bg-blue-grey-2 q-mt-xs"},{default:n(()=>[t("div",at,[t("div",{class:g(["col-xs-12 col-sm-5 text-center self-center text-subtitle1 text-bold",r(u).screen.xs?"":"row flex-center"]),style:{height:"100%"}}," \uD3C9\uAC00\uD558\uAE30 ",2),t("div",ot,[s(C,{"keep-color":"",modelValue:e.markCh,"onUpdate:modelValue":[o=>e.markCh=o,o=>b(o,e)],disable:x.value,val:"S",label:"S",color:"deep-orange",class:"text-subtitle1 text-bold"},null,8,["modelValue","onUpdate:modelValue","disable"]),s(C,{"keep-color":"",modelValue:e.markCh,"onUpdate:modelValue":[o=>e.markCh=o,o=>b(o,e)],disable:x.value,val:"A",label:"A",color:"blue",class:"text-subtitle1 text-bold"},null,8,["modelValue","onUpdate:modelValue","disable"]),s(C,{"keep-color":"",modelValue:e.markCh,"onUpdate:modelValue":[o=>e.markCh=o,o=>b(o,e)],disable:x.value,val:"B",label:"B",color:"cyan",class:"text-subtitle1 text-bold"},null,8,["modelValue","onUpdate:modelValue","disable"]),s(C,{"keep-color":"",modelValue:e.markCh,"onUpdate:modelValue":[o=>e.markCh=o,o=>b(o,e)],disable:x.value,val:"C",label:"C",color:"teal",class:"text-subtitle1 text-bold"},null,8,["modelValue","onUpdate:modelValue","disable"]),s(C,{"keep-color":"",modelValue:e.markCh,"onUpdate:modelValue":[o=>e.markCh=o,o=>b(o,e)],disable:x.value,val:"D",label:"D",color:"green",class:"text-subtitle1 text-bold"},null,8,["modelValue","onUpdate:modelValue","disable"])]),t("div",nt,"\uD3C9\uAC00\uC810\uC218 : "+v(e.markPoint),1)])]),_:2},1024)]),_:2},1024))),128))])]),_:1})])],512)]),_:1})]),_:1}))}};export{qt as default};
