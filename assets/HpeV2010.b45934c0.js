import{Q as G}from"./QBanner.24b401f7.js";import{Q as Y}from"./QSpace.d904af94.js";import{Q as pe,a as V}from"./QBreadcrumbs.3767f519.js";import{r as u,ad as U,j as fe,p as he,k as ve,o as ge,S as O,U as p,V as _,W as s,a7 as _e,n as e,$ as l,X as C,Y as o,a5 as f,Z as n,aa as m,a1 as T,bu as P,a4 as Z,a2 as w,a9 as S,bE as xe,a0 as h,a8 as we,ag as be,F as ye,I as F,a6 as Ce,ab as qe,af as Se}from"./index.7f77393b.js";import{Q as ke}from"./QItemLabel.4a9918b4.js";import{Q as X}from"./QToolbar.963c8e72.js";import{Q as J}from"./QBadge.449d79cc.js";import{Q as De}from"./QTooltip.472888d5.js";import{Q as He}from"./QBar.aa6ab1e6.js";import{Q as Qe}from"./QForm.5afa36a0.js";import{C as L}from"./ClosePopup.a28dc14a.js";/* empty css                        */import{A as Ye}from"./main.esm.3000f5c9.js";import"./lodash.de417675.js";import{j as E,n as Ee}from"./json-util.159ec565.js";import{u as Ne}from"./use-quasar.49a49e75.js";import{u as ze}from"./setUserInfo.19c8fe66.js";import{u as Ae}from"./setYearInfo.8b7f3a45.js";import{c as Be}from"./comm-util.69b85d5b.js";import"./position-engine.150cbc63.js";import"./selection.004dbe93.js";import"./_commonjsHelpers.b8add541.js";const Ve={class:"row"},Ue={class:"col-xs-12 col-sm-12 col-lg-8"},Oe={class:"row q-col-gutter-x-sm"},Te={class:"col-xs-12 col-sm-12"},Fe=l("span",{class:"text-subtitle1 text-bold"}," \uBAA9\uD45C\uC124\uC815\uC5D0 \uB300\uD55C \uC2B9\uC778\uC791\uC5C5\uC785\uB2C8\uB2E4.",-1),Je=l("br",null,null,-1),Le=l("span",{class:"text-teal text-bold"},"\uC2B9\uC778\uB300\uAE30",-1),Re=l("br",null,null,-1),We=l("span",{class:"text-teal text-bold"},"\uC2B9\uC778\uBC18\uB824",-1),je=l("br",null,null,-1),Ie={class:"col-xs-12 col-sm-12 col-lg-4"},Me={class:"row"},$e={class:"text-bold text-subtitle2 q-pr-sm text-orange"},Ge={class:"row q-col-gutter-x-lg"},Pe={class:"col-xs-12 col-md-12 col-lg-4"},Ze=l("span",{class:"text-bold text-subtitle1 text-red"}," \uBC18\uB824\uC0AC\uC720 ",-1),Xe={class:"col-xs-12 col-md-12 col-lg-8"},Ke={class:"row q-gutter-x-sm"},et={class:"row"},tt={class:"row"},st=l("div",{class:"bg-deep-orange-3 text-center text-subtitle2 text-bold q-px-xs"},"\uC21C\uBC88",-1),at=l("div",{class:"bg-deep-orange-3 text-center text-subtitle2 text-bold q-px-xs"},"\uBAA9\uD45C\uC124\uC815",-1),lt=["innerHTML"],ot=l("div",{class:"bg-deep-orange-3 text-center text-subtitle2 text-bold q-px-xs"},"\uAE30\uC900\uC124\uC815",-1),rt={class:"q-pa-xs"},nt={class:"q-px-sm"},it=l("br",null,null,-1),ct={class:"q-px-sm"},dt=l("br",null,null,-1),ut={class:"q-px-sm"},mt=l("br",null,null,-1),pt={class:"q-px-sm"},ft=l("br",null,null,-1),ht={class:"q-px-sm"},vt=l("div",{class:"bg-deep-orange-3 text-center text-subtitle2 text-bold q-px-xs"},"\uAC00\uC911\uCE58",-1),gt=l("div",null,"\uBAA9\uD45C\uBC18\uB824\uC0AC\uC720 \uB4F1\uB85D (\uC804\uCCB4\uC801\uC6A9)",-1),_t=45,Lt={__name:"HpeV2010",setup(xt){const k=ze(),K=Ae();u("2011101");const D=u(!1),v=u(null),ee=()=>{v.value?d.dialog({dark:!0,title:"\uC548\uB0B4",html:!0,message:"\uAE30\uC874\uC5D0 \uC791\uC131\uD55C \uBC18\uB824\uB0B4\uC6A9\uC774 \uC788\uC2B5\uB2C8\uB2E4. <br>\uB2E4\uC2DC\uC791\uC131 \uB610\uB294 \uAE30\uC874\uB0B4\uC6A9\uC744 \uC218\uC815\uD558\uC2E4 \uC218 \uC788\uC2B5\uB2C8\uB2E4",ok:{label:"\uB2E4\uC2DC\uC791\uC131",color:"primary"},cancel:{label:"\uC218\uC815\uD558\uAE30",color:"secondary"}}).onOk(()=>{v.value=null}).onCancel(()=>{}).onDismiss(()=>{$(v),D.value=!0}):D.value=!0},c=U({rows:[],rowsSel:[]}),R=u(300),W=u(90),d=Ne();let x=null;const j=u(300);fe(()=>({height:`${j.value}px`}));const H=u(null),te=a=>{H.value=a.api,H.value.setGridOption("headerHeight",45),H.value.setGridOption("rowHeight",45),H.value.deselectAll()},se=U({group:{flex:1,sortable:!0,filter:!0,floatingFilter:!1,editable:!1}}),ae=U({group:[{headerName:"#",width:50,pinned:"left",sortable:!1,filter:!1,valueGetter:function(a){return a.node.rowIndex+1}},{headerName:"\uC131\uBA85",field:"evtEmpNm",minWidth:80,maxWidth:80,resizable:!0},{headerName:"\uC18C\uC18D\uD300",field:"evtDeptNm",minWidth:100,resizable:!0},{headerName:"\uC9C1\uAE09",field:"evtTitlNm",minWidth:80,maxWidth:80,resizable:!0},{headerName:"\uC9C4\uD589\uC0C1\uD0DC",field:"statusMessage",minWidth:105,maxWidth:105,cellStyle:a=>a.data.authCnt0+a.data.authCnt1+a.data.authCnt2+a.data.authCnt3+a.data.authCnt4+a.data.authCnt5===0?d.dark.isActive?{color:"orange"}:{color:"orange"}:{}}]});he(()=>{window.removeEventListener("resize",N)}),ve(()=>{z()}),ge(()=>{window.addEventListener("resize",N),N()}),u({stdYear:"",evtEmpCd:"",workNo:0,returnDoc:"",status:""});const g=u([]),le=u({status_1:0,status_3:0}),oe=a=>{g.value=a.api.getSelectedRows(),g.value.length===1&&g.value[0].status!==""&&ce(g.value[0])},I=u(0),re=a=>(I.value=a,{minHeight:a?`calc(100vh - ${a}px)`:"100vh"}),N=()=>{j.value=window.innerHeight-I.value-730},ne=()=>{d.dialog({dark:!0,title:"\uC2B9\uC778\uB300\uAE30 \uCDE8\uC18C\uD558\uAE30",message:"\uC120\uD0DD\uB41C \uC790\uB8CC\uC758 \uC2B9\uC778\uC694\uCCAD\uC744 \uCDE8\uC18C \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C? ",ok:{push:!0,color:"orange"},cancel:{push:!0,color:"grey-7"}}).onOk(()=>{x="S";let a=[],r=[],t={};t.stdYear=g.value[0].stdYear,t.evtEmpCd=g.value[0].evtEmpCd,t.status="0",t.acceptYn="N";let b='{"mode": "'+x+'","data":'+JSON.stringify(t)+"}";a.push(b),Q(E.jsonFiller(a,r))}).onCancel(()=>{}).onDismiss(()=>{})},M=(a,r,t,b)=>{d.dialog({dark:!0,title:t,message:"\uC120\uD0DD\uB41C "+b+"\uAC74 \uC790\uB8CC\uB97C \uBAA8\uB450 \uC2B9\uC778 \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C? ",ok:{push:!0,color:"orange"},cancel:{push:!0,color:"grey-7"}}).onOk(()=>{x="S";let y=[],B=[],q={};q.stdYear=g.value[0].stdYear,q.evtEmpCd=g.value[0].evtEmpCd,q.status=a,q.acceptYn=r;let me='{"mode": "'+x+'","data":'+JSON.stringify(q)+"}";y.push(me),Q(E.jsonFiller(y,B))}).onCancel(()=>{}).onDismiss(()=>{})},ie=()=>{d.dialog({dark:!0,title:"\uBC18\uB824\uD558\uAE30",message:"\uC790\uB8CC\uB97C \uBAA8\uB450 \uBC18\uB824 \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C? ",ok:{push:!0,color:"orange"},cancel:{push:!0,color:"grey-7"}}).onOk(()=>{x="R";let a=[],r=[],t={};t.stdYear=g.value[0].stdYear,t.evtEmpCd=g.value[0].evtEmpCd,t.status="2",t.returnDoc=v.value;let b='{"mode": "'+x+'","data":'+JSON.stringify(t)+"}";a.push(b),Q(E.jsonFiller(a,r))}).onCancel(()=>{}).onDismiss(()=>{})},z=async()=>{try{const a=await O.post("/api/hpe/hpe2010_list",{paramSetYear:K.setYear,paramEvsEmpCd:k.setEmpCd});c.rows=a.data.data,c.rows.length===0&&(W.value=220);const r=c.rows.length*_t;R.value=W.value+r}catch(a){console.error("Error fetching users:",a)}},i=u({cancelHide:!1,sendHide:!1,sendCancelHide:!1,returnHide:!1,acceptUpdate:!1}),ce=async a=>{try{const r=await O.post("/api/hpe/hpe2010_select_list",{paramSetYear:a.stdYear,paramEvsEmpCd:a.evsEmpCd,paramEvtEmpCd:a.evtEmpCd});c.rowsSel=r.data.data,v.value=null,i.value.cancelHide=!1,i.value.sendHide=!1,i.value.sendCancelHide=!1,i.value.returnHide=!1,i.value.acceptUpdate=!1;for(let t=0;t<c.rowsSel.length;t++)c.rowsSel[t].status==="1"&&c.rowsSel[t].acceptYn!=="Y"&&(i.value.acceptUpdate=!0),c.rowsSel[t].status==="1"&&c.rowsSel[t].acceptYn==="Y"&&(i.value.sendHide=!0,i.value.cancelHide=!0,v.value=c.rowsSel[t].returnDoc),c.rowsSel[t].status==="2"&&(i.value.returnHide=!0,v.value=c.rowsSel[t].returnDoc),c.rowsSel[t].status==="3"&&c.rowsSel[t].acceptYn!=="Y"&&(i.value.sendCancelHide=!0);i.value.acceptUpdate&&(de(a.stdYear,a.evtEmpCd),i.value.sendHide=!0,i.value.cancelHide=!0)}catch(r){console.error("Error fetching users:",r)}},Q=a=>{O.post("/api/hpe/hpe2010_save",a).then(r=>{if(x!=="A"){let t={};t.rtn=r.data.rtn,t.rtnMsg=r.data.rtnMsg,Ee.notifyView(t),z(),c.rowsSel=[],i.value.cancelHide=!1,i.value.sendHide=!1,i.value.sendCancelHide=!1,i.value.acceptUpdate=!1}}).catch(r=>{console.log("error: ",r)})},de=(a,r)=>{x="A";let t=[],b=[],y={};y.stdYear=a,y.empCd=r,y.acceptYn="Y";let B='{"mode": "'+x+'","data":'+JSON.stringify(y)+"}";t.push(B),Q(E.jsonFiller(t,b))},A=u(0),$=a=>{a&&(A.value=Be.textByteLength(a),A.value>200&&alert("\uD55C\uAE00 200\uC790 \uAE4C\uC9C0 \uAC00\uB2A5\uD569\uB2C8\uB2E4."))},ue={localeText:{noRowsToShow:"\uC870\uD68C \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}};return(a,r)=>(p(),_(_e,{class:"q-pa-xs-xs q-pa-sm-md","style-fn":re},{default:s(()=>[e(m,{class:"q-pa-sm"},{default:s(()=>[l("div",Ve,[l("div",Ue,[l("div",Oe,[l("div",Te,[e(G,{rounded:"",class:C(o(d).dark.isActive?"bg-grey-9":"bg-grey-3"),style:{height:"100%"}},{avatar:s(()=>[e(o(f),{name:"menu_book",color:"primary",size:"md"})]),default:s(()=>[Fe,Je,n(" 1. "),Le,n(" \uC790\uB8CC\uB9CC \uC2B9\uC778\uD558\uC2E4 \uC218 \uC788\uC2B5\uB2C8\uB2E4."),Re,n(" 2. "),We,n("\uC2DC \uBC18\uB824\uC0AC\uC720\uB97C \uC791\uC131\uD569\uB2C8\uB2E4."),je]),_:1},8,["class"])])])]),l("div",Ie,[e(m,{class:C(["q-ml-sm-md q-pa-sm",o(d).screen.xs?"q-mt-xs":"row flex-center"]),style:{height:"100%"}},{default:s(()=>[l("div",Me,[e(Y),l("span",$e,[n("\uD3C9\uAC00\uC790"),e(o(f),{name:"chevron_right",size:"xs"})]),e(pe,{separator:"|",class:"text-orange text-bold","active-color":"secondary"},{default:s(()=>[e(V,{icon:"room_preferences",label:o(k).setDeptNm,style:{width:"90px"}},null,8,["label"]),e(V,{icon:"star",label:o(k).setTitlNm,style:{width:"60px"}},null,8,["label"]),e(V,{icon:"person",label:o(k).setEmpNm,style:{width:"70px"}},null,8,["label"])]),_:1})])]),_:1},8,["class"])])])]),_:1}),e(T,{spaced:""}),e(m,{class:"q-pa-sm"},{default:s(()=>[e(P,{class:C(["text-center q-pa-sm q-mb-sm",o(d).dark.isActive?"bg-teal-7":"bg-teal-3"])},{default:s(()=>[e(ke,{class:"text-h6"},{default:s(()=>[n("\uBAA9\uD45C\uC124\uC815 / \uC2B9\uC778\uD558\uAE30")]),_:1})]),_:1},8,["class"]),l("div",Ge,[l("div",Pe,[e(m,{class:"q-pa-sm"},{default:s(()=>[e(X,{class:"row q-pa-none"},{default:s(()=>[e(Z,{color:"red","text-color":"white",size:"md"},{default:s(()=>[n("1\uBC88")]),_:1}),e(Y),e(o(w),{outline:"",color:"grey",dense:"",onClick:z},{default:s(()=>[e(o(f),{name:"refresh",size:"xs",class:"q-mr-xs"}),n(" \uB2E4\uC2DC \uBD88\uB7EC\uC624\uAE30 ")]),_:1}),i.value.cancelHide?(p(),_(o(w),{key:0,outline:"",color:"grey",dense:"",onClick:ne,class:"q-ml-xs"},{default:s(()=>[e(o(f),{name:"refresh",size:"xs",class:"q-mr-xs"}),n(" \uC2B9\uC778\uB300\uAE30\uCDE8\uC18C ")]),_:1})):S("",!0)]),_:1}),l("div",{style:xe({height:R.value+30+"px"})},[e(o(Ye),{style:{width:"100%",height:"100%"},class:C(o(d).dark.isActive?"ag-theme-alpine-dark":"ag-theme-alpine"),columnDefs:ae.group,rowData:c.rows,defaultColDef:se.group,rowSelection:"single",onSelectionChanged:oe,onGridReady:te,"grid-options":ue},null,8,["class","columnDefs","rowData","defaultColDef"])],4),i.value.returnHide?(p(),_(m,{key:0,class:"q-pa-sm q-mt-md"},{default:s(()=>[e(G,{rounded:"",class:C(o(d).dark.isActive?"bg-grey-9":"bg-grey-2")},{avatar:s(()=>[e(o(f),{name:"reply",style:{width:"50px"}})]),action:s(()=>[Ze]),default:s(()=>[n(" "+h(v.value)+" ",1)]),_:1},8,["class"])]),_:1})):S("",!0)]),_:1})]),l("div",Xe,[e(m,{class:"q-pa-xs"},{default:s(()=>[e(X,{class:"row q-pa-none"},{default:s(()=>[e(Z,{color:"red","text-color":"white",size:"md"},{default:s(()=>[n("2\uBC88")]),_:1}),e(Y),l("div",Ke,[i.value.sendCancelHide?(p(),_(o(w),{key:0,outline:"",color:"teal",dense:"",class:"q-pr-md",onClick:r[0]||(r[0]=t=>M("1","Y","\uC2B9\uC778\uCDE8\uC18C",c.rowsSel.length))},{default:s(()=>[e(J,{color:"orange",floating:""},{default:s(()=>[n(h(le.value.status_3),1)]),_:1}),e(o(f),{name:"check",size:"xs",class:"q-mr-xs"}),n(" \uC2B9\uC778\uCDE8\uC18C ")]),_:1})):S("",!0),i.value.sendHide?(p(),_(o(w),{key:1,outline:"",color:"blue",dense:"",class:"q-pr-md",onClick:r[1]||(r[1]=t=>M("3","N","\uC2B9\uC778\uD558\uAE30",c.rowsSel.length))},{default:s(()=>[e(J,{color:"orange",floating:""},{default:s(()=>[n(h(c.rowsSel.length),1)]),_:1}),e(o(f),{name:"check",size:"xs",class:"q-mr-xs"}),n(" \uC2B9\uC778\uD558\uAE30 ")]),_:1})):S("",!0),i.value.sendHide?(p(),_(o(w),{key:2,outline:"",color:"red",dense:"",class:"q-pr-md",onClick:ee},{default:s(()=>[e(J,{color:"orange",floating:""},{default:s(()=>[n(h(c.rowsSel.length),1)]),_:1}),e(o(f),{name:"reply",size:"xs",class:"q-mr-xs"}),n(" \uBC18\uB824\uD558\uAE30 ")]),_:1})):S("",!0)])]),_:1}),l("div",et,[(p(!0),we(ye,null,be(c.rowsSel,t=>(p(),_(m,{flat:"",bordered:"",style:{width:"100%"},key:t.workNo,class:"q-mb-sm"},{default:s(()=>[l("div",tt,[e(m,{class:"col-xs-12 col-sm-1"},{default:s(()=>[st,l("div",{class:C(["text-center q-pa-xs",o(d).screen.xs?"":"row flex-center"]),style:{height:"100%"}},h(t.seq),3)]),_:2},1024),e(m,{class:"col-xs-12 col-sm-7"},{default:s(()=>[at,l("div",{class:"q-pa-xs",innerHTML:t.targetDoc},null,8,lt)]),_:2},1024),e(m,{class:"col-xs-12 col-sm-3"},{default:s(()=>[ot,l("div",rt,[l("span",nt,[n(" 1. "+h(t.evaS),1),it]),l("span",ct,[n(" 2. "+h(t.evaA),1),dt]),l("span",ut,[n(" 3. "+h(t.evaB),1),mt]),l("span",pt,[n(" 4. "+h(t.evaC),1),ft]),l("span",ht," 5. "+h(t.evaD),1)])]),_:2},1024),e(m,{class:"col-xs-12 col-sm-1"},{default:s(()=>[vt,l("div",{class:C(["text-center q-pa-xs",o(d).screen.xs?"":"row flex-center"]),style:{height:"100%"}},h(t.weight),3)]),_:2},1024)])]),_:2},1024))),128))])]),_:1})])]),e(T,{spaced:""})]),_:1}),e(Se,{persistent:"",modelValue:D.value,"onUpdate:modelValue":r[3]||(r[3]=t=>D.value=t)},{default:s(()=>[e(m,{flat:"",bordered:"",style:{"max-width":"450px",width:"100%"}},{default:s(()=>[e(He,null,{default:s(()=>[e(o(f),{name:"list_alt"}),gt,e(Y),F((p(),_(o(w),{dense:"",flat:"",icon:"close"},{default:s(()=>[e(De,null,{default:s(()=>[n(" \uB2EB\uAE30 ")]),_:1})]),_:1})),[[L]])]),_:1}),e(Qe,{class:""},{default:s(()=>[e(m,{class:"q-pa-md"},{default:s(()=>[e(P,null,{default:s(()=>[e(Ce,{autofocus:"","input-style":{minHeight:"150px"},outlined:"",type:"textarea",class:"q-pt-sm",modelValue:v.value,"onUpdate:modelValue":[r[2]||(r[2]=t=>v.value=t),$],color:o(d).dark.isActive?"orange":"teal","label-color":o(d).dark.isActive?"orange":"teal",label:"\uBC18\uB824\uC0AC\uC720",rows:5,autogrow:!0,hint:`${A.value} / 200\uC790 \uAE4C\uC9C0 \uC785\uB825\uD558\uC2E4 \uC218 \uC788\uC2B5\uB2C8\uB2E4.`},null,8,["modelValue","color","label-color","hint"])]),_:1})]),_:1})]),_:1}),e(T,{size:"2px",color:"grey"}),e(qe,{align:"right",class:"q-pa-md"},{default:s(()=>[F((p(),_(o(w),{color:"red",onClick:ie},{default:s(()=>[e(o(f),{class:"q-mr-xs",name:"save",size:"xs"}),n(" \uBC18\uB824\uD558\uAE30 ")]),_:1})),[[L]]),F((p(),_(o(w),{color:"grey"},{default:s(()=>[e(o(f),{class:"q-mr-xs",name:"close",size:"xs"}),n(" \uB2EB\uAE30 ")]),_:1})),[[L]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{Lt as default};
